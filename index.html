<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BROKEN HEART Project - Gaza Casualties</title>
<style>
@font-face {
font-family: 'Akzidenz Grotesk';
src: url('AkzidenzGrotesk-Super.ttf') format('truetype');
font-weight: 900;
 }
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap');
* {
margin: 0;
padding: 0;
box-sizing: border-box;
 }
body {
background-color: white;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
overflow: hidden;
 }
/* ===== 공통 스타일 ===== */
.page {
width: 100%;
height: 100vh;
display: none;
justify-content: center;
align-items: center;
position: relative;
 }
.page.active {
display: flex;
 }
/* ===== PAGE 1: BROKEN HEART ===== */
#page1 {
background-color: white;
flex-direction: column;
 }
.page1-container {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
width: 100%;
height: 100%;
background-color: black;
 }
.page1-video {
width: 100%;
height: 100%;
object-fit: cover;
background-color: white;
 }
/* ===== PAGE 2: 통계 ===== */
#page2 {
background-color: white;
flex-direction: column;
 }
.page2-container {
position: relative;
width: 100%;
height: 100%;
display: flex;
flex-direction: row;
 }

/* 왼쪽 이미지 슬라이드 영역 */
.left-image-section {
width: 30%;
height: 100%;
object-fit: cover;
position: relative;
overflow: hidden;
background: #f0f0f0;
}

.slide-container {
position: absolute;
width: 100%;
height: 100%;
opacity: 0;
transition: opacity 1s ease-in-out;
}

.slide-container.active {
opacity: 1;
}

.slide-image {
width: 100%;
height: 100%;
object-fit: cover;
}

/* 오른쪽 콘텐츠 영역 */
.right-content-section {
width: 70%;
height: 100%;
position: relative;
}

.background-typo {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 80%;
height: auto;
opacity: 0.08;
animation: fadeInBg 1.5s ease-in-out 5.5s forwards;
object-fit: contain;
z-index: 1;
 }
.page2-content {
position: relative;
z-index: 2;
padding: 60px;
display: flex;
flex-direction: column;
justify-content: space-between;
height: 100%;
 }
.top-section {
display: flex;
justify-content: space-between;
font-size: 20px;
opacity: 0;
animation: fadeIn 1s ease-in-out 5.5s forwards;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.main-content {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
flex: 1;
 }
.title {
font-size: 32px;
font-weight: 900;
margin-top: 0px;
margin-bottom: 30px;
opacity: 0;
animation: fadeIn 1s ease-in-out 6s forwards;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.main-number {
font-size: 140px;
font-weight: 900;
color: black;
line-height: 1;
letter-spacing: -5px;
opacity: 0;
animation: fadeIn 1s ease-in-out 6.5s forwards;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.stats-section {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 40px 60px;
margin-top: 60px;
opacity: 0;
animation: fadeIn 1s ease-in-out 7s forwards;
 }
.stat-item {
display: flex;
flex-direction: column;
 }
.stat-item:first-child .stat-number {
color: #FF0000;
 }
.stat-number {
font-size: 36px;
font-weight: 900;
margin-bottom: 10px;
color: black;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.stat-label {
font-size: 12px;
font-weight: 700;
letter-spacing: 1.5px;
color: black;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.stat-item:first-child .stat-label {
color: #FF0000;
 }
.bottom-section {
display: flex;
justify-content: space-between;
align-items: flex-end;
padding-top: -20px;
padding-bottom: -40px;
opacity: 0;
animation: fadeIn 1s ease-in-out 7.5s forwards;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.bottom-text {
font-size: 20px;
color: black;
 }
.rabbit1-container {
position: relative;
width: 150px;
height: 150px;
cursor: pointer;
transition: transform 0.3s ease;
 }
.rabbit1-container:hover {
transform: scale(4);
 }
.rabbit1-image {
width: 105%;
height: 105%;
object-fit: contain;
 }
/* ===== PAGE 3: 상세 정보 ===== */
#page3 {
background-color: white;
flex-direction: column;
position: relative;
overflow: hidden;
 }
.page3-container {
position: relative;
width: 100%;
height: 100%;
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
 }
.rabbit2-container {
position: absolute;
bottom: -500px;
left: 50%;
transform: translateX(-50%);
width: 100%;
height: 100%;
animation: rabbitRiseUp 2s ease-out 0.5s forwards;
z-index: 1;
 }
.rabbit2-image {
width: 100%;
height: 100%;
object-fit: cover;
 }
.page3-content {
position: relative;
z-index: 2;
text-align: center;
padding: 40px;
 }
.page3-title {
font-size: 64px;
font-weight: 900;
margin-bottom: 30px;
animation: fadeIn 1s ease-in-out 2.5s forwards;
opacity: 0;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }
.page3-text {
font-size: 24px;
line-height: 1.8;
margin-bottom: 10px;
animation: fadeIn 1s ease-in-out 3s forwards;
opacity: 0;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
 }

/* ===== 감상평 버튼 (고정) ===== */
.review-button {
position: fixed;
bottom: 30px;
left: 30px;
background: black;
color: white;
border: 2px solid black;
padding: 15px 30px;
font-size: 12px;
font-weight: 700;
letter-spacing: 2px;
cursor: pointer;
text-transform: uppercase;
transition: all 0.3s ease;
z-index: 1000;
display: none;
}

.review-button.show {
display: block;
animation: slideInLeft 0.5s ease-out;
}

.review-button:hover {
background: white;
color: black;
transform: translateX(5px);
}

@keyframes slideInLeft {
from {
transform: translateX(-100px);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}

@keyframes slideInLeft {
from {
transform: translateX(-100px);
opacity: 0;
}
to {
transform: translateX(0);
opacity: 1;
}
}

/* ===== 모달 스타일 ===== */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.95);
z-index: 2000;
display: none;
opacity: 0;
transition: opacity 0.3s ease;
}

.modal-overlay.active {
display: block;
opacity: 1;
}

.modal-container {
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: 90%;
max-width: 900px;
height: 90vh;
background: white;
z-index: 2001;
display: none;
opacity: 0;
transition: all 0.3s ease;
overflow-y: auto;
}

.modal-container.active {
display: block;
opacity: 1;
}

.modal-header {
background: black;
color: white;
padding: 30px;
position: sticky;
top: 0;
z-index: 10;
}

.modal-title {
font-size: 72px;
font-weight: 900;
margin-bottom: 5px;
letter-spacing: -1px;
}

.modal-subtitle {
font-size: 14px;
color: #888;
letter-spacing: 1px;
}

.close-modal {
position: absolute;
top: 30px;
right: 30px;
background: transparent;
border: 2px solid white;
color: white;
width: 40px;
height: 40px;
font-size: 24px;
cursor: pointer;
transition: all 0.3s ease;
display: flex;
align-items: center;
justify-content: center;
}

.close-modal:hover {
background: white;
color: black;
transform: rotate(90deg);
}

.modal-content {
padding: 30px;
}

/* 탭 네비게이션 */
.tab-nav {
display: flex;
gap: 10px;
margin-bottom: 30px;
border-bottom: 2px solid black;
}

.tab-btn {
background: transparent;
border: none;
padding: 10px 20px;
font-size: 14px;
font-weight: 700;
letter-spacing: 1px;
cursor: pointer;
text-transform: uppercase;
transition: all 0.3s ease;
border-bottom: 3px solid transparent;
margin-bottom: -2px;
}

.tab-btn.active {
border-bottom-color: #FF0000;
color: #FF0000;
}

.tab-content {
display: none;
}

.tab-content.active {
display: block;
animation: fadeIn 0.3s ease;
}

/* 감상평 작성 폼 (모달 내부) */
.modal-form {
margin-bottom: 40px;
}

.form-group {
margin-bottom: 20px;
}

.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 700;
font-size: 12px;
letter-spacing: 1px;
text-transform: uppercase;
}

.form-group input,
.form-group textarea {
width: 100%;
padding: 12px;
border: 2px solid black;
background: white;
font-size: 16px;
font-family: 'Akzidenz Grotesk', 'Poppins', Arial, sans-serif;
transition: all 0.3s ease;
}

.form-group input:focus,
.form-group textarea:focus {
outline: none;
background: black;
color: white;
}

.form-group textarea {
resize: vertical;
min-height: 100px;
}

.submit-btn {
background: black;
color: white;
border: 2px solid black;
padding: 12px 30px;
font-size: 14px;
font-weight: 700;
letter-spacing: 2px;
cursor: pointer;
text-transform: uppercase;
transition: all 0.3s ease;
}

.submit-btn:hover {
background: #FF0000;
border-color: #FF0000;
}

/* 감상평 목록 (모달 내부) */
.reviews-list {
max-height: 500px;
overflow-y: auto;
}

.review-item {
background: #f8f8f8;
margin-bottom: 15px;
padding: 20px;
position: relative;
transition: all 0.3s ease;
border-left: 3px solid transparent;
}

.review-item:hover {
border-left-color: #FF0000;
background: #fff;
}

.review-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
}

.review-author {
font-weight: 700;
font-size: 16px;
text-transform: uppercase;
letter-spacing: 1px;
}

.review-date {
color: #888;
font-size: 11px;
letter-spacing: 1px;
}

.review-title {
font-size: 20px;
font-weight: 700;
margin-bottom: 10px;
}

.review-content {
line-height: 1.6;
color: #333;
}

.delete-btn {
position: absolute;
top: 10px;
right: 10px;
background: transparent;
color: #FF0000;
border: 1px solid #FF0000;
padding: 3px 8px;
font-size: 10px;
letter-spacing: 1px;
cursor: pointer;
opacity: 0;
transition: all 0.3s ease;
text-transform: uppercase;
}

.review-item:hover .delete-btn {
opacity: 1;
}

.delete-btn:hover {
background: #FF0000;
color: white;
}

/* 통계 */
.review-stats {
display: flex;
gap: 30px;
margin-bottom: 20px;
padding: 20px;
background: black;
color: white;
}

.stat-box {
text-align: center;
}

.stat-value {
font-size: 28px;
font-weight: 900;
}

.stat-label-review {
font-size: 10px;
color: #888;
letter-spacing: 2px;
text-transform: uppercase;
margin-top: 5px;
}

/* 빈 상태 */
.empty-state {
text-align: center;
padding: 40px;
color: #888;
}

/* ===== 애니메이션 ===== */
@keyframes fadeIn {
 from {
opacity: 0;
 }
 to {
opacity: 1;
 }
 }
@keyframes fadeInBg {
 from {
opacity: 0;
 }
 to {
opacity: 0.15;
 }
 }
@keyframes rabbitRiseUp {
 from {
bottom: -200px;
opacity: 0;
 }
 to {
bottom: 0;
opacity: 1;
 }
 }

/* ===== 모바일 반응형 ===== */
@media (max-width: 768px) {
.page2-container {
flex-direction: column;
}
.left-image-section {
width: 100%;
height: 40%;
}
.right-content-section {
width: 100%;
height: 60%;
}
.page2-content {
padding: 30px;
 }
.title {
font-size: 20px;
 }
.main-number {
font-size: 60px;
 }
.stats-section {
grid-template-columns: repeat(2, 1fr);
gap: 20px;
 }
.stat-number {
font-size: 24px;
 }
.stat-label {
font-size: 10px;
 }
.rabbit1-container {
width: 80px;
height: 80px;
 }
.page3-title {
font-size: 40px;
 }
.page3-text {
font-size: 14px;
 }
.rabbit2-container {
width: 250px;
height: 250px;
 }
.review-button {
bottom: 20px;
left: 20px;
padding: 10px 20px;
font-size: 10px;
}
.modal-container {
width: 95%;
height: 95vh;
}
.modal-title {
font-size: 48px;
}
.modal-content {
padding: 20px;
}
 }
</style>
</head>
<body>
<!-- ===== PAGE 1: BROKEN HEART (영상) ===== -->
<div class="page active" id="page1">
<div class="page1-container">
<video class="page1-video" autoplay muted loop playsinline>
<source src="page1-animation.mp4" type="video/mp4">
<source src="page1-animation.webm" type="video/webm">
 Your browser does not support the video tag.
</video>
</div>
</div>
<!-- ===== PAGE 2: 통계 ===== -->
<div class="page" id="page2">
<div class="page2-container">
<!-- 왼쪽 이미지 슬라이드 섹션 -->
<div class="left-image-section">
<div class="slide-container active">
<img src="Asset 1.png" alt="Asset 1" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 2.png" alt="Asset 2" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 3.png" alt="Asset 3" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 4.png" alt="Asset 4" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 5.png" alt="Asset 5" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 6.png" alt="Asset 6" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 7.png" alt="Asset 7" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 8.png" alt="Asset 8" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 9.png" alt="Asset 9" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 10.png" alt="Asset 10" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 11.png" alt="Asset 11" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 12.png" alt="Asset 12" class="slide-image">
</div>
<div class="slide-container">
<img src="Asset 13.png" alt="Asset 13" class="slide-image">
</div>
</div>

<!-- 오른쪽 콘텐츠 섹션 -->
<div class="right-content-section">
<img src="typo-no-text.png" alt="Background" class="background-typo">
<div class="page2-content">
<!-- 상단 텍스트 -->
<div class="top-section">
<p class="top-left">Guarantee - Your windows will remain safe forever</p>
<p class="top-right">BROKEN HEART Project</p>
</div>
<!-- 메인 콘텐츠 -->
<div class="main-content">
<h1 class="title">Gaza casualties — live death toll</h1>
<div class="main-number" id="mainNumber">0</div>
<!-- 통계 -->
<div class="stats-section">
<div class="stat-item">
<div class="stat-number" id="childrenKilled">0</div>
<p class="stat-label">CHILDREN KILLED</p>
</div>
<div class="stat-item">
<div class="stat-number" id="womenKilled">0</div>
<p class="stat-label">WOMEN KILLED</p>
</div>
<div class="stat-item">
<div class="stat-number" id="pressKilled">0</div>
<p class="stat-label">PRESS KILLED</p>
</div>
<div class="stat-item">
<div class="stat-number" id="medicalKilled">0</div>
<p class="stat-label">MEDICAL KILLED</p>
</div>
<div class="stat-item">
<div class="stat-number" id="injured">0</div>
<p class="stat-label">INJURED (TOTAL)</p>
</div>
<div class="stat-item">
<div class="stat-number" id="starved">0</div>
<p class="stat-label">STARVED (TOTAL)</p>
</div>
</div>
</div>
<!-- 하단 섹션 -->
<div class="bottom-section">
<p class="bottom-text"></p>
<div class="rabbit1-container" id="rabbit1Trigger">
<img src="rabbit1.png" alt="Click to continue" class="rabbit1-image">
</div>
<p class="bottom-text">Go to next page</p>
</div>
</div>
</div>
</div>
</div>
<!-- ===== PAGE 3: 상세 정보 ===== -->
<div class="page" id="page3">
<div class="page3-container">
<div class="rabbit2-container">
<img src="rabbit2.png" alt="Rabbit" class="rabbit2-image">
</div>
<div class="page3-content">
<p class="page3-text">Click anywhere to return</p>
</div>
</div>
</div>

<!-- ===== 감상평 버튼 (고정) ===== -->
<button class="review-button" id="reviewButton" onclick="openModal()">
→ REVIEWS
</button>

<!-- ===== 모달 오버레이 ===== -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>

<!-- ===== 모달 컨테이너 ===== -->
<div class="modal-container" id="modalContainer">
<div class="modal-header">
<h1 class="modal-title">BROKEN HEART</h1>
<p class="modal-subtitle">Share your thoughts and reflections</p>
<button class="close-modal" onclick="closeModal()">×</button>
</div>

<div class="modal-content">
<!-- 탭 네비게이션 -->
<div class="tab-nav">
<button class="tab-btn active" onclick="switchTab('write')">Write Review</button>
<button class="tab-btn" onclick="switchTab('read')">Read Reviews</button>
</div>

<!-- 작성 탭 -->
<div class="tab-content active" id="writeTab">
<div class="modal-form">
<div class="form-group">
<label for="author">Name</label>
<input type="text" id="author" placeholder="Enter your name" required>
</div>
<div class="form-group">
<label for="reviewTitle">Title</label>
<input type="text" id="reviewTitle" placeholder="Title of your reflection" required>
</div>
<div class="form-group">
<label for="content">Your Thoughts</label>
<textarea id="content" placeholder="Share your thoughts about this project..." required></textarea>
</div>
<button class="submit-btn" onclick="saveReview()">Submit Review</button>
</div>
</div>

<!-- 읽기 탭 -->
<div class="tab-content" id="readTab">
<!-- 통계 -->
<div class="review-stats">
<div class="stat-box">
<div class="stat-value" id="totalReviews">0</div>
<div class="stat-label-review">Total Reviews</div>
</div>
<div class="stat-box">
<div class="stat-value" id="todayReviews">0</div>
<div class="stat-label-review">Today</div>
</div>
</div>

<!-- 감상평 목록 -->
<div class="reviews-list" id="reviewsList">
<div class="empty-state">
<p>No reviews yet. Be the first to share your thoughts.</p>
</div>
</div>
</div>
</div>
</div>

<script>
// ===== 페이지 관리 =====
let currentPage = 1;
function changePage(pageNum) {
// 이전 페이지가 2였다면 슬라이드쇼 정지
if (currentPage === 2) {
stopImageSlideshow();
}

document.getElementById(`page${currentPage}`).classList.remove('active');
document.getElementById(`page${pageNum}`).classList.add('active');
currentPage = pageNum;

// 페이지 2 이후부터 리뷰 버튼 표시
if (pageNum >= 2) {
document.getElementById('reviewButton').classList.add('show');
}

// ===== 페이지 2에 도착하면 API 데이터 로드 및 슬라이드 시작
if (pageNum === 2) {
loadAndAnimateData();
startImageSlideshow();
 }
 }
// ===== 페이지 1 → 2 자동 전환 (영상 끝난 후) =====
// 영상이 끝나면 자동으로 페이지 2로 전환
document.getElementById('page1').querySelector('video').addEventListener('ended', () => {
changePage(2);
 });
// ===== 페이지 1 클릭/터치 시 즉시 페이지 2로 =====
document.getElementById('page1').addEventListener('click', () => {
changePage(2);
 });
document.getElementById('page1').addEventListener('keydown', () => {
changePage(2);
 });
// ===== 토끼1 클릭 → 페이지 3 =====
document.getElementById('rabbit1Trigger').addEventListener('click', () => {
changePage(3);
 });
// ===== 페이지 3 클릭 → 페이지 1 (순환) =====
document.getElementById('page3').addEventListener('click', () => {
changePage(1);
// 영상 재시작
const video = document.getElementById('page1').querySelector('video');
video.currentTime = 0;
video.play();
// 리뷰 버튼 숨기기
document.getElementById('reviewButton').classList.remove('show');
 });

// ===== 모달 관리 =====
function openModal() {
document.getElementById('modalOverlay').classList.add('active');
document.getElementById('modalContainer').classList.add('active');
displayReviews();
}

function closeModal() {
document.getElementById('modalOverlay').classList.remove('active');
document.getElementById('modalContainer').classList.remove('active');
}

// 탭 전환
function switchTab(tab) {
// 탭 버튼 활성화 상태 변경
document.querySelectorAll('.tab-btn').forEach(btn => {
btn.classList.remove('active');
});
event.target.classList.add('active');

// 탭 컨텐츠 표시
document.querySelectorAll('.tab-content').forEach(content => {
content.classList.remove('active');
});

if (tab === 'write') {
document.getElementById('writeTab').classList.add('active');
} else {
document.getElementById('readTab').classList.add('active');
displayReviews();
}
}

// ===== API 데이터 로드 및 애니메이션 =====
const defaultData = {
mainNumber: 68528,
childrenKilled: 20179,
womenKilled: 12500,
pressKilled: 255,
medicalKilled: 1701,
injured: 170395,
starved: 463
 };
async function fetchCasualtyData() {
try {
// Palestine Datasets API
const response = await fetch('https://data.techforpalestine.org/api/v1/casualties');
if (response.ok) {
const data = await response.json();
console.log('Palestine Datasets API 데이터 로드 성공:', data);
const latestData = data[data.length - 1];
return {
mainNumber: latestData.killed_total || defaultData.mainNumber,
childrenKilled: latestData.children_killed || defaultData.childrenKilled,
womenKilled: latestData.women_killed || defaultData.womenKilled,
pressKilled: latestData.press_killed || defaultData.pressKilled,
medicalKilled: latestData.medical_killed || defaultData.medicalKilled,
injured: latestData.injured_total || defaultData.injured,
starved: latestData.starved_total || defaultData.starved
 };
 }
console.log('API 응답 오류, 기본값 사용');
return defaultData;
 } catch (error) {
console.error('API 로드 실패:', error);
console.log('기본값 사용');
return defaultData;
 }
 }
function animateNumber(element, targetNumber, duration = 2000, delay = 0) {
setTimeout(() => {
let currentNumber = 0;
const startTime = Date.now();
function update() {
const elapsed = Date.now() - startTime;
const progress = Math.min(elapsed / duration, 1);
currentNumber = Math.floor(targetNumber * progress);
element.textContent = currentNumber.toLocaleString('en-US');
if (progress < 1) {
requestAnimationFrame(update);
 } else {
element.textContent = targetNumber.toLocaleString('en-US');
 }
 }
requestAnimationFrame(update);
 }, delay);
 }
function animateAllNumbers(data) {
// 메인 숫자 (2초) - 즉시 시작
animateNumber(document.getElementById('mainNumber'), data.mainNumber, 2000, 0);
// 개별 숫자들 (스태거 효과 - 차례대로)
animateNumber(document.getElementById('childrenKilled'), data.childrenKilled, 1500, 300);
animateNumber(document.getElementById('womenKilled'), data.womenKilled, 1500, 600);
animateNumber(document.getElementById('pressKilled'), data.pressKilled, 1500, 900);
animateNumber(document.getElementById('medicalKilled'), data.medicalKilled, 1500, 1200);
animateNumber(document.getElementById('injured'), data.injured, 1500, 1500);
animateNumber(document.getElementById('starved'), data.starved, 1500, 1800);
 }
async function loadAndAnimateData() {
const data = await fetchCasualtyData();
animateAllNumbers(data);
 }

// ===== 감상평 시스템 =====
// 감상평 저장
function saveReview() {
    const author = document.getElementById('author').value.trim();
    const title = document.getElementById('reviewTitle').value.trim();
    const content = document.getElementById('content').value.trim();

    if (!author || !title || !content) {
        alert('Please fill in all fields');
        return;
    }

    const review = {
        id: Date.now(),
        author: author,
        title: title,
        content: content,
        date: new Date().toISOString()
    };

    // LocalStorage에서 기존 감상평 불러오기
    let reviews = JSON.parse(localStorage.getItem('bh_reviews') || '[]');
    
    // 새 감상평 추가
    reviews.unshift(review);
    
    // LocalStorage에 저장
    localStorage.setItem('bh_reviews', JSON.stringify(reviews));

    // 폼 초기화
    document.getElementById('author').value = '';
    document.getElementById('reviewTitle').value = '';
    document.getElementById('content').value = '';

    // 읽기 탭으로 전환
    document.querySelectorAll('.tab-btn')[1].click();
    
    // 목록 새로고침
    displayReviews();
}

// 감상평 표시
function displayReviews() {
    const reviewsList = document.getElementById('reviewsList');
    const reviews = JSON.parse(localStorage.getItem('bh_reviews') || '[]');

    if (reviews.length === 0) {
        reviewsList.innerHTML = `
            <div class="empty-state">
                <p>No reviews yet. Be the first to share your thoughts.</p>
            </div>
        `;
        updateReviewStats([]);
        return;
    }

    reviewsList.innerHTML = reviews.map(review => `
        <div class="review-item">
            <button class="delete-btn" onclick="deleteReview(${review.id})">DELETE</button>
            <div class="review-header">
                <div class="review-author">${review.author}</div>
                <div class="review-date">${formatDate(review.date)}</div>
            </div>
            <h3 class="review-title">${review.title}</h3>
            <div class="review-content">${review.content}</div>
        </div>
    `).join('');

    updateReviewStats(reviews);
}

// 통계 업데이트
function updateReviewStats(reviews) {
    const totalReviews = reviews.length;
    
    const today = new Date().toDateString();
    const todayReviews = reviews.filter(r => new Date(r.date).toDateString() === today).length;

    document.getElementById('totalReviews').textContent = totalReviews;
    document.getElementById('todayReviews').textContent = todayReviews;
}

// 감상평 삭제
function deleteReview(id) {
    if (confirm('Delete this review?')) {
        let reviews = JSON.parse(localStorage.getItem('bh_reviews') || '[]');
        reviews = reviews.filter(review => review.id !== id);
        localStorage.setItem('bh_reviews', JSON.stringify(reviews));
        displayReviews();
    }
}

// 날짜 포맷
function formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'short', 
        day: 'numeric' 
    }).toUpperCase();
}

// ===== 이미지 슬라이드쇼 =====
let currentSlide = 0;
let slideInterval;

function startImageSlideshow() {
const slides = document.querySelectorAll('.slide-container');

// 3초마다 이미지 변경
slideInterval = setInterval(() => {
slides[currentSlide].classList.remove('active');
currentSlide = (currentSlide + 1) % slides.length;
slides[currentSlide].classList.add('active');
}, 3000);
}

// 페이지 변경시 슬라이드쇼 정지
function stopImageSlideshow() {
if (slideInterval) {
clearInterval(slideInterval);
}
}

// ESC 키로 모달 닫기
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeModal();
    }
});
</script>
</body>
</html>